{% extends 'base.html' %}

{% load widget_tweaks %}

{% block breadcrumb %}
    <li class="breadcrumb-item"><a href="{% url 'home' %}">Moduli</a></li>
    <li class="breadcrumb-item">
      <a href="{% url 'sigle:sigle-list' %}">Sigle</a>
    </li>
      <li class="breadcrumb-item active">{% if object %}{{ object }}{% else %}Nuova{% endif %}</li>
{% endblock breadcrumb %}

{% block content %}
<form method="post" novalidate>
  {% csrf_token %}
  {% include 'includes/form.html' %}

  <hr>
  {{ form.tipo.label_tag }}
  {% render_field form.tipo class="form-control" %}
  <a href="{% url 'sigle:tipo-new-popup' %}" id='add_tipo' onclick="return showAddPopup(this);"><i class="fas fa-plus"></i></a>
  <a id="edit_tipo" style="cursor: pointer; cursor: hand;"><i class="fas fa-pencil-alt"></i></a>
  <hr>

  <button type="submit" class="btn btn-success">Salva</button>

  <hr>
  {% for formset in inlines %}
  <h2>Traduzioni</h2>

  {% include 'includes/formset_table.html' %}
  {% endfor %}

</form>


{% endblock content %}

{% block script %}
<script type="text/javascript">
  function showEditPopup(url) {
    var win = window.open(url, "Edit", 'height=500,width=800,resizable=yes,scrollbars=yes');
    return false;
  }
  function showAddPopup(triggeringLink) {
    var name = triggeringLink.id.replace(/^add_/, '');
    href = triggeringLink.href;
    var win = window.open(href, "Edit", 'height=500,width=800,resizable=yes,scrollbars=yes');
    win.focus();
    return false;
  }
  function closePopup(win,newID,newRepr,id) {
    $(id).append('<option value=' + newID + ' selected >' + newRepr + '</option>')
    win.close();
  }
</script>


{% endblock script %}
