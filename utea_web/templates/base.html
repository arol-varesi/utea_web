{% load static %}
<!doctype html>
<html lang="it">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
    <!-- FontAwesome CSS - load all styles -->
    <link rel="stylesheet" href="{% static 'css/all.css' %}">
    <title>{% block title %} UTEA WebHome {% endblock title%}</title>
  </head>

  <body>

    <!-- Menu Bar --->
    <nav class="navbar navbar-expand-sm navbar-fixed-top navbar-dark bg-dark">
      <!-- Logo o Brand : Link alla Homepage -->
      <a class="navbar-brand" href="{% url 'home' %}">AROL-UTEA</a>
      <!-- Pulsante per espandere il menu se "collassato" -->
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Voci della navbar collassabili -->
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <!-- <form class="form-inline my-2 my-lg-0" action="{# % url 'funzione_cerca' % #}">
          <input name="q" class="form-control mr-sm-2" type="search" placeholder="Cosa stai cercando?" aria-label="Search">
          <button class="btn btn-outline-info my-2 my-sm-0" type="submit">Cerca</button>
        </form> -->
        <ul class="navbar-nav">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="menuModuli" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Moduli</a>
            <div class="dropdown-menu" aria-labelledby="menuModuli">
              <a class="dropdown-item" href="{% url 'moduli:sigle'%}">Sigle Funzioni (test 1)</a>
              <a class="dropdown-item" href="{% url 'moduli:sigle-test2'%}">Sigle Funzioni (test 2)</a>
              <a class="dropdown-item" href="{% url 'moduli:sigle-list-edit'%}">Sigle (editabili)</a>              
            </div>
          </li>
        </ul>
        <!-- Menù login: cambia se l'utente è loggato o meno -->
        <ul class="navbar-nav ml-auto">
          {% if request.user.is_authenticated %}
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                {{ request.user.username }}
              </a>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <a class="dropdown-item" href="{# % url 'user_profile' username=request.user.username % #}">Profilo</a>
                <a class="dropdown-item" href="{% url 'password_change' %}">Aggiorna Password</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="{% url 'logout' %}">Esci</a>
              </div>
            </li>
          {% else %}
            <li class="nav-item dropdown">
              <div class="nav-link dropdown-toggle text-right" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                Login
              </div>
              <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                <form class="px-4 py-3" method="POST" action="{% url 'login' %}">
                  {% csrf_token %}
                  <div class="form-group">
                    <input type="text" class="form-control" name="username" placeholder="Username" />
                  </div>
                  <div class="form-group">
                    <input type="password" class="form-control" name="password" placeholder="Password" />
                  </div>

                  <button type="submit" class="btn btn.default">Login</button>
                </form>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Password dimenticata?</a>
              </div>
            </li>
          {% endif %}
        </ul>
      </div>
    </nav>

    <div class="wrapper">
      <!-- Sidebar -->
      <nav id="sidebar" hidden>
        <div class="sidebar-header">
          <h3>Menu</h3>
        </div>
        <ul class="list-unstyled components">
          <p>Dummy Heading</p>
          <li class="active">
            <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle">Home</a>
            <ul class="collapse list-unstyled" id="homeSubmenu">
              <li>
                <a href="#">Home 1</a>
              </li>
              <li>
                <a href="#">Home 2</a>
              </li>
              <li>
                <a href="#">Home 3</a>
              </li>
            </ul>
          </li>
          <hr>
          <li>
            {% block lmenu %}

            {% endblock lmenu %}
          </li>
        </ul>
      </nav>

      <!-- Page Content -->
      <div class="container pt-3">
        {% block breadcrumb %}
        {% endblock breadcrumb %}

        <nav class="navbar navbar-expand-lg navbar-light bg-light" hidden>
          <div class="container-fluid">
            <button type="button" id="sidebarCollapse" class="btn btn-info" >
              <i class="fas fa-align-left"></i>
              <span>Toggle Sidebar</span>
            </button>
          </div>
        </nav>
          {% block content %}

          {% endblock content %}
      </div>

    </div>


      <!-- Optional JavaScript -->
      <!-- jQuery first, then Popper.js, then Bootstrap JS -->
      <script src="{% static 'js/jquery-3.3.1.min.js'%}"></script>
      <script src="{% static 'js/popper.min.js'%}"></script>
      <script src="{% static 'js/bootstrap.min.js'%}"></script>
      {% block script %}
      {% endblock script %}
      <script type="text/javascript">
        $(document).ready(function () {
          $('#sidebarCollapse').on('click', function () {
          $('#sidebar').toggleClass('active'); });
        });
      </script>


  </body>
</html>
